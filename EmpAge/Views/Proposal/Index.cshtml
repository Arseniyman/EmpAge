@model IEnumerable<EmpAge.Models.Proposal>
@using System.Security.Claims;

@{
    ViewData["Title"] = "Предложения";
    int incomingCounter = 1;
    int outgoingCounter = 1;
}

<div class="container">
    <h1>Предложения</h1>
    <div class="row">
        <div class="col-md-6">
            <h3>Входящие</h3>
        </div>
        <div class="col-md-6">
            <h3>Исходящие</h3>
        </div>
    </div>
    <div class="row">
        @foreach (var proposal in Model)
        {
            @if (proposal.RecipientId == User.FindFirstValue(ClaimTypes.NameIdentifier))
            {
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-4">
                            <p>@proposal.CreateTime</p>
                            <p>@incomingCounter . @proposal.Message</p>
                            incomingCounter++
                        </div>
                        <div class="col-md-2">
                            @if (User.IsInRole("employer"))
                            {
                                <a class="btn btn-info" asp-controller="Summaries"
                                   asp-action="Details" asp-route-id="@proposal.RecordId"></a>
                            }
                            else
                            {
                                <a class="btn btn-info" asp-controller="Vacancies"
                                   asp-action="Details" asp-route-id="@proposal.RecordId"></a>
                            }
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-4">
                            <p>@proposal.CreateTime</p>
                            <p>@incomingCounter . @proposal.Message</p>
                            outgoingCounter++
                        </div>
                        <div class="col-md-2">
                            @if (User.IsInRole("employer"))
                            {
                                <a class="btn btn-info" asp-controller="Vacancies"
                                    asp-action="Details" asp-route-id="@proposal.RecordId"></a>
                            }
                            else
                            {
                                <a class="btn btn-info" asp-controller="Summaries"
                                    asp-action="Details" asp-route-id="@proposal.RecordId"></a>
                            }
                        </div>
                    </div>
                </div>
            }
        }

    </div>
</div>

